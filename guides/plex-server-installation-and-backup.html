<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Eric Jones - Guides - Plex Server Installation and Backup</title>
    <link rel="stylesheet" href="../style.css">
  </head>

<body>
  <main id="main">
    <div class="content">
      <header>
        <p style="padding: 0;margin: 0;">
        <a href="../index.html">
            <b class="site-title">Eric Jones</b>
        </a>
        </p>
        <ul style="padding: 0;margin: 0;">
          <li class="">
            <a href="../now.html"><span>/now</span></a>
          <li class="">
            <a href="../guides.html"><span>/guides</span></a>
          <li class="">
            <a href="../thoughts.html"><span>/thoughts</span></a>
          <li class="">
            <a href="../projects.html"><span>/projects</span></a>
          </li>
        </ul>
      </header>
      <hr class="hr-list" style="padding: 0;margin: 0;">
      <h1>Plex Server Installation and Backup</h1>
      <section>
        <p>
          <em>Plex gives you one place to find and access all the media that matters to you. From personal media on your own server, to free and on-demand Movies & Shows, live TV, podcasts, and web shows, to streaming music, you can enjoy it all in one app, on any device.</em>
        </p>
    	</section>
    	<section>
        <h2>Plex Media Server Installation</h2>
        <h3>Plex Package Repository</h3>
          <ol>
            <li>Update and upgrade packages -
                <pre class="align-left"><code>$ sudo apt-get update && sudo apt-get upgrade -y </code></pre>
            </li>
            <li>Installing dependencies and repositories -
							<pre class="align-left"><code>$ sudo apt-get install apt-transport-https  </code></pre>
							<pre class="align-left"><code>$ curl https://downloads.plex.tv/plex-keys/PlexSign.key | sudo apt-key add -  </code></pre>
							<pre class="align-left"><code>$ echo deb https://downloads.plex.tv/repo/deb public main | sudo tee /etc/apt/sources.list.d/plexmediaserver.list </code></pre>
							<pre class="align-left"><code>$ sudo apt-get update </code></pre>
						</li>
					</ol>
    	</section>
    	<section>
      	<h3>Installing Plex Media Server Package</h3>
					<ol>
							<li>Installing plexmediaserver -
								<pre class="align-left"><code>$ sudo apt install plexmediaserver  </code></pre>
							</li>
							<li>If this message <code>plexmediaserver.list (Y/I/N/O/D/Z) [default=N] ?</code> appears, type <code>N</code></li>
					</ol>
    	</section>
    	<section>
        <h3>Setting up Plex Server via Web Browser</h3>
					<ol>
						<li>In web browser address bar type <code>[YOUR IP]:32400/web </code></li>
						<li>Give server a name</li>
						<li>Select “Add Library” in left-hand side column</li>
						<li>Select desired type of media</li>
						<li>When browsing for media click the parent folder that contains the 
						desired media</li>
					</ol>
    	</section>
    	<section>
        <h1>Plex Media Server Backup</h1>
        <h3>Plex Media Server Data Directory Location</h3>
        	<p>Location: /var/lib/plexmediaserver/Library/Application\ Support/</p>
        <h3>Copy Plex Directory and Create Archived File</h3>
					<ol>
							<li>In main directory -
								<pre class="align-left"><code>$ rsync -ravuP /var/lib/plexmediaserver/Library/Application\ Support/ /home/pi/plex-backup/  </code></pre>
								<pre class="align-left"><code>$ tar -czvf plexbackup.tar.gz /home/pi/plex-backup/Plex\ Media\ Server/  </code></pre>
							</li>
							<li>Type <code>ls</code> to verify and see 'plexbackup.tar.gz' file</li>
					</ol>
			</section>
			<section>
        <h3>Copy Tar File to Local Machine</h3>
				<ol>
          <li>Copy compressed file using remote sync - 
						<pre class="align-left"><code>$ rsync -avuPr [USERNAME]@[IP-ADDRESS]:plexbackup.tar.gz ~/path/of/desired/location  </code></pre>
					</li>
				</ol>
        <h3>Restoring Backup</h3>
					<ol>
						<li>Copy compressed file back to Plex Application Support directory - 
							<pre class="align-left"><code>$ cp plexbackup.tar.gz /var/lib/plexmediaserver/Library/Application\ Support/ </code></pre>
						</li>
						<li>Uncompress file - 
							<pre class="align-left"><code>$ tar -xf plexbackup.tar.gz  </code></pre>
						</li>
						<li>
							<p>Re-install Plex Media Server application</p>
						</li>
					</ol>
    </section>
    </div>
  </main>
</body>
</html>
